<!DOCTYPE html>
<html lang="en" manifest="offline.manifest">

<head>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-touch-fullscreen" content="yes">
    <meta http-equiv="content-type" content="text/html;charset=UTF-8">
    <link rel="apple-touch-icon" href="images/favicon.ico">
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="font-awesome-4.1.0/css/font-awesome.min.css">
    <script type="text/javascript" src="jquery.min.js"></script>
    <!--    <script type="text/javascript" src="jquery.mobile.custom.min.js"></script>-->
<!--    <script src="http://code.jquery.com/mobile/1.4.4/jquery.mobile-1.4.4.min.js"></script>-->
    <script type="text/javascript">
        function startWithOfflineResources() {
            var resources;
            // If we have resources saved from a previous visit, use them
            if (localStorage && localStorage.resources) {
                resources = JSON.parse(localStorage.resources);
                startWithResources(resources, false);
                // Otherwise, apologize and let the user know
            } else {
                alert(APP_START_FAILED);
            }
        }

        function feed(contextValue, reObj, reStatus, errorDetails) {
            var articles = [],
                obj = {},
                content = reObj.feed.entries;
            //rss来源网站名称
            //            articles.push("<h2>" + reObj.feed.title + "</h2>");
            //rss内容
            for (var i = 0, len = content.length; i < len; i++) {
                obj["id"] = i + 1;
                obj["date"] = new Date(content[i].publishedDate).toLocaleString();
                obj["title"] = content[i].title;
                obj["body"] = content[i].content;
                obj["author"] = content[i].author;
                obj["link"] = content[i].link;
                articles.push(obj);
                obj = {};
            }
            APP.article.deleteArticles(function () {
                APP.article.insertArticles(articles, function () {
                    /*
                     * Instead of the line below we *could* just run showArticeList() but since
                     * we already have the articles in scope we needn't make another call to the
                     * database and instead just render the articles straight away.
                     */
                    $("#body").html(APP.templates.articleList(articles));
                });
            });
        }



        window.APP = {};
        $(document).ready(function () {
            var APP_START_FAILED = "I'm sorry, the app can't start right now.";
            // If we know the device is offline, don't try to load new resources
            if (navigator && navigator.onLine === false) {
                startWithOfflineResources();

                // Otherwise, download resources, eval them, if successful push them into local storage.
            } else {
                APP.applicationController.start("", true);
            }
        });
    </script>
    <script type="text/javascript" src="source/database.js"></script>
    <script type="text/javascript" src="source/templates.js"></script>
    <script type="text/javascript" src="source/application/applicationcontroller.js"></script>
    <script type="text/javascript" src="source/articles/article.js"></script>
    <script type="text/javascript" src="source/articles/articlescontroller.js"></script>
    <title>News</title>
</head>

<body>
</body>

</html>